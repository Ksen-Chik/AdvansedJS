<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Lesson 4</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <form action="#">
        <div class="form">
            <h4 class="h4-contacts">SEND US MESSAGE</h4>
            <p class="form-text">Name</p>
            <input class="input" type="text" placeholder="Your Name">
            <p class="form-text">Phone Number</p>
            <input class="input" type="tel" placeholder="Your Phone number">
            <p class="form-text">Email</p>
            <input class="input" type="email" placeholder="Your Email">
            <p class="form-text">Message</p>
            <textarea class="input textarea" cols="30" rows="10" placeholder="Your Message"></textarea>
            <button type="submit" class="button white">submit</button>
        </div>
    </form>
    <script>
        'use strict';
        let str = `One: 'Hi Mary.' Two: 'Oh, hi.'
            One: 'How are you doing?'
            Two: 'I'm doing alright. How about you?'
            One: 'Not too bad. The weather is great isn't it?'
            Two: 'Yes. It's absolutely beautiful today.'
            One: 'I wish it was like this more frequently.'
            Two: 'Me too.'
            One: 'So where are you going now?'
            Two: 'I'm going to meet a friend of mine at the department store'
            One: 'Going to do a little shopping?'
            Two: 'Yeah, I have to buy some presents for my parents.'
            One: 'What's the occasion?'
            Two: 'It's their anniversary.'
            One: 'That's great. Well, you better get going. You don't want to be late.'
            Two: 'I'll see you next time.'
            One: 'Sure.' Bye.'`;

        // 1 задание:
        console.log(str.replace(/\'/mg, '\"'));

        // 2 задание:
        let result;
        let regExp = /\w+\'\w+/ig;
        let lastInd = regExp.lastIndex;
        let str3 = '';
        while (result = regExp.exec(str)) {
            let str2 = str.slice(lastInd, result.index);
            str2 = str2.replace(/\'/mg, '\"');
            lastInd = regExp.lastIndex;
            str3 += str2 + str.slice(result.index, lastInd);
        }
        str3 += str.slice(str3.length, str.length).replace(/\'/mg, '\"');
        console.log(str3);

        // 3 задание:
        let formEl = document.querySelector('form');
        let input = document.querySelectorAll('.input');
        let name = document.querySelector('.input[type="text"]');
        let phone = document.querySelector('.input[type="tel"]');
        let male = document.querySelector('.input[type="email"]');

        formEl.addEventListener('submit', function (event) {
            let allIsValid = true;
            input.forEach(inp => {
                if (inp.value === "") {
                    inp.style.borderColor = 'red';
                    allIsValid = false;
                    event.preventDefault();
                }
                else {
                    inp.style.borderColor = '#356EAD';
                }
            });

            if (name.value.search(/[^a-zA-Zа-яА-ЯёЁ]/ig) !== -1) {
                name.style.borderColor = 'red';
                allIsValid = false;
            }

            if (phone.value.match(/\+7\(\d{3}\)\d{3}\-\d{4}/ig) === null) {
                phone.style.borderColor = 'red';
                allIsValid = false;
            }

            if (male.value.match(/^\w+[\.\-]?\w+\@[a-zA-Z]+\.ru$/ig) === null) {
                male.style.borderColor = 'red';
                allIsValid = false;
            }

            if (!allIsValid) {
                alert('Исправьте некорректно заполненные поля');
            }
        });

    </script>
</body>

</html>